# Task Tracker — Project Overview

Обновлено: январь 2025. Документ описывает фактическое состояние продукта, известные ограничения и ближайшие этапы, необходимые для выхода на уровень Jira-подобного решения.

## 1. Текущее состояние

### Backend (FastAPI, PostgreSQL)
| Возможность | Статус | Комментарий |
| --- | --- | --- |
| JWT аутентификация | ✅ | Есть базовая регистрация/логин, но refresh-токены не используются на клиенте. |
| Организации/проекты | ⚠️ | Модели существуют; добавлены API для организаций, базовые проверки принадлежности и автогенерация workflow/permission scheme, но нет UI и расширенных ролей. |
| RBAC | ❌ | Нет ролей/прав вообще; любой пользователь может читать/изменять любые данные. |
| Задачи | ✅ | CRUD + история; нет конкуррентного контроля за `task_number`. |
| Комментарии | ✅ (API) | Вьюха на фронте отсутствует, нет упоминаний/вложений. |
| Спринты, backlog, workflow-настройки | ❌ | Модели частично задекларированы, но API и логика отсутствуют. |
| Уведомления / realtime | ❌ | WebSocket/Redis/Celery не используются. |
| Поиск и фильтры | ⚠️ | Только простые фильтры по статусу/проекту; нет пагинации с метаданными. |

### Frontend (Vue 3, Tailwind)
| Возможность | Статус | Комментарий |
| --- | --- | --- |
| Shell/Навигация | ⚠️ | Простая верхняя панель, не похожая на Atlassian UI. |
| Доска | ⚠️ | Drag&drop работает, но статусы захардкожены, нет swimlane, аватаров, настроек. |
| Бэклог/спринты | ❌ | Нет страниц/компонентов. |
| Карточка задачи | ⚠️ | Только просмотр описания и изменение статуса; нет редактирования полей, комментариев, вложений. |
| Комментарии/активность | ❌ | UI отсутствует. |
| Notifications/search | ❌ | Глобального поиска/уведомлений нет. |

### Infrastructure
| Компонент | Статус | Комментарий |
| --- | --- | --- |
| Docker Compose | ✅ | Backend, frontend, PostgreSQL, Redis, Nginx. |
| Миграции | ⚠️ | Alembic присутствует, но до недавнего времени схемы создавались при старте приложения. |
| Тесты/CI | ❌ | pytest/vitest не настроены, тестов не было. |
| Мониторинг | ❌ | Sentry/metrics не подключены. |

## 2. Ключевые проблемы
1. **Безопасность и многоарендность**: отсутствуют роли и проверки принадлежности к организации/проекту; один токен открывает все данные.
2. **Несоответствие Jira UX**: текущий UI не похож на Atlassian, отсутствуют ключевые сценарии (backlog, board настройки, issue view).
3. **Недостающие модули**: нет watchers, комментариев во фронте, вложений, задач-зависимостей, поиска, уведомлений.
4. **Технический долг**: нет тестов, нет realtime, Redis/Celery/S3 не используются, документация обещает больше, чем реализовано.

## 3. Архитектурные основы (текущее положение)
- **Backend**: FastAPI (async), SQLAlchemy 2.0, PostgreSQL, Alembic. Каталоги `app/api`, `app/models`, `app/crud`, `app/schemas`.
- **Frontend**: Vue 3 (Composition API + TS), Pinia, Vue Router, TailwindCSS, Vite.
- **Инфраструктура**: Docker Compose + Nginx, Redis (пока не задействован), Makefile и вспомогательные скрипты.

Структура каталогов остаётся прежней (см. README), но фактические возможности ограничены описанными выше пунктами.

## 4. Roadmap и связь с планом
- Подробное видение Jira-паритета описано в [`PROJECT_PLAN.md`](PROJECT_PLAN.md). Там же — список фаз и критерии готовности.
- Настоящий документ должен отражать фактическое состояние; при завершении каждой фазы обновляйте таблицы и комментарии.

### Sprint 0 (текущий)
1. Удалён автоматический `create_all` на старте API (готово).
2. Обновлена документация (README + текущий файл) — ✅.
3. Настроен базовый каркас тестов (pytest, smoke-тесты для core-логики) — **в процессе**.
4. Подготовлен дизайн RBAC/Org модели + миграции — **в процессе**, см. `docs/RBAC_SPEC.md`.

## 5. Известные ограничения (до внедрения новых фич)
- Нет отделения production/dev конфигураций; все секреты по умолчанию лежат в репозитории.
- Удаление проектов/задач выполняется физически (hard delete), нет архивов.
- Админ-учётка создаётся автоматически (`admin@example.com` / `Admin123!`), переопределяется переменными `DEFAULT_ADMIN_*`.
- UI не локализован и не поддерживает темы.
- Ограничение concurrency для `task_number` отсутствует — возможны race condition и 500 ошибки.
- Refresh-токены не используются фронтендом; истечение access-токена разлогинивает пользователя.

## 6. Следующие шаги
1. Завершить настройку тестовой инфраструктуры и добавить первые сценарии (auth/security, схемы).
2. Согласовать и задокументировать RBAC/Org схему, подготовить миграции и сервисные зависимости.
3. Начать Phase 2 из `PROJECT_PLAN.md`: внедрение реального RBAC, workflow, backlog/sprint API.
4. Параллельно подготовить дизайн-систему фронтенда под Atlassian (макеты, UI-kit).

Документ служит отправной точкой для всех участников команды. Любые изменения возможностей или roadmap должны отражаться здесь и в главном плане.
